# Use a base image with a minimal OS
FROM ubuntu:20.04

# Set environment variables
ENV USER=root
ENV DEBIAN_FRONTEND=noninteractive

# Install required packages
RUN apt-get update && \
    apt-get install -y \
    tigervnc-standalone-server \
    tigervnc-common \
    xterm \
    x11-xserver-utils \
    xfce4 \
    xfce4-terminal \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Set up VNC password
RUN mkdir -p /root/.vnc && \
    echo "your_password" | vncpasswd -f > /root/.vnc/passwd && \
    chmod 600 /root/.vnc/passwd

# Expose the VNC port
EXPOSE 5901

# Start VNC server
CMD ["tigervncserver", ":1", "-geometry", "1280x800", "-depth", "24", "-xstartup", "/usr/bin/startxfce4"]
